{% extends "base.html" %}

{% block title %}Appointment Details{% endblock %}

{% block content %}
<h1>Appointment Details</h1>

<div class="card">
  <div class="card-header">
    <h2>Appointment #{{ appointment.id[:8] }}</h2>
  </div>
  <div class="card-body">
    <div class="row">
      <div class="col-md-6">
        <p><strong>Patient:</strong> {{ patient.first_name }} {{ patient.last_name }}</p>
        <p><strong>Doctor:</strong> Dr. {{ doctor.first_name }} {{ doctor.last_name }}</p>
        <p><strong>Scheduled Time:</strong> {{ appointment.scheduled_time.strftime('%Y-%m-%d %H:%M') }}</p>
        <p><strong>Duration:</strong> {{ appointment.duration }} minutes</p>
      </div>
      <div class="col-md-6">
        <p><strong>Room:</strong> {{ room.name if room else 'Not assigned' }}</p>
        <p><strong>Status:</strong> {{ appointment.status }}</p>
        <p><strong>Created At:</strong> {{ appointment.created_at.strftime('%Y-%m-%d %H:%M:%S') if appointment.created_at else 'N/A' }}</p>
        <p><strong>Updated At:</strong> {{ appointment.updated_at.strftime('%Y-%m-%d %H:%M:%S') if appointment.updated_at else 'N/A' }}</p>
      </div>
    </div>
    
    {% if appointment.notes %}
    <div class="row">
      <div class="col-12">
        <h3>Notes</h3>
        <p>{{ appointment.notes }}</p>
      </div>
    </div>
    {% endif %}
  </div>
</div>

<div class="mt-3">
  <a href="{{ url_for('appointments.list_appointments') }}" class="btn btn-secondary">Back to Appointments</a>
  <a href="{{ url_for('appointments.edit_appointment', id=appointment.id) }}" class="btn btn-primary">Edit Appointment</a>
  <form method="POST" action="{{ url_for('appointments.delete_appointment', id=appointment.id) }}" style="display: inline;">
    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this appointment?')">Delete Appointment</button>
  </form>
</div>
{% endblock %}